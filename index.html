<!DOCTYPE html>
<html>
  <head>
  <!-- styles put here, but you can include a CSS file and reference it instead! -->
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
    </style>
  </head>
  <body>
  <!-- create a place to put the map -->
    <div id="map"></div>
    <script type="text/javascript">
    
//create a map variable
var map;
//function to initialize the map within the map div
function initMap() {
//use a constructor to create a new map JS object
  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 40.7413549, lng: -73.99802439999996},
    zoom: 13
  });

  //new array of locations: in the array, these are the values:
  //0: title
  //1: LatLng
  //2: ID
 var locationArray = [ 
    ['Park Ave Super Duper Fancy Penthouse', {lat:40.76344599999999, lng:-73.9686686}, 1],
    ['Chelsea Loft for the Fashionable Types',  {lat:40.7452994, lng:-73.99848320000001}, 2],
    ['Union Square Open Floor Plan for Lovers of Whole Foods', {lat:40.7342965, lng:-73.9912195}, 3],
    ['East Village Hip Studio for all you Hippies out there', {lat:40.7273179, lng:-73.98595999999998}, 4],
    ['SOHO Artsy Bachelor Pad For you Suave Dudes', {lat:40.7228715, lng:-74.00158249999998}, 5],
    ['Chinatown Homey Space (and by Homey I mean TINY!)', {lat:40.7180628, lng:-73.9961237}, 6],       
];
 
  //new blank array for all the markers
  var markers = [];
  
  //create couter variable
  var i;
  var position;
  var title;
  for (i = 0; i < locationArray.length; i++) {
    position = locationArray[i][1];
    title = locationArray[i][0];
    //create a marker per location, and put into markers array
    marker = new google.maps.Marker({
      position: position,
      title:title,
      map: map,
      animation: google.maps.Animation.DROP
    });
    //push the marker to our array of markers
    markers.push(marker);
    //create an onclick event to open an infowindow at each marker using this
    marker.addListener('click', function() {
      infowindow = new google.maps.InfoWindow({
        content: "Listing: "+this.title
      });
      infowindow.open(map, this);
    });
  }
  
  //Now extend the bounds to fit all the points
  var latlngbounds = new google.maps.LatLngBounds();
	for (i = 0; i < markers.length; i++) {
		latlngbounds.extend(markers[i].position);
	}
	map.fitBounds(latlngbounds);
  }

      
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmZ_1EX7cJmIaJu_ZIr46zPZ-HmQIGv7w&callback=initMap">
    </script>
  </body>
</html>
